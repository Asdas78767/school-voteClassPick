
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>아바타 꾸미기</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; background: #f9f9f9; padding: 10px; text-align: center; }
    h2 { color: #2c3e50; }
    input { margin: 10px 0; }
    img { width: 100px; height: 100px; border-radius: 50%; margin-top: 10px; }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBEB8oMfBuaPpIKAXIBCBRf1k22JTAAY1E",
      authDomain: "classpick-5e62c.firebaseapp.com",
      projectId: "classpick-5e62c"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>
</head>
<body>
  <h2>아바타 꾸미기</h2>
  <input type="text" id="avatarUrl" placeholder="아바타 이미지 URL 입력" /><br>
  <button onclick="saveAvatar()">저장하기</button>
  <div id="avatarDisplay"></div>

  <script>
    auth.onAuthStateChanged(user => {
      if (!user) return;
      db.collection("users").doc(user.uid).get().then(doc => {
        const data = doc.data();
        if (data.avatarUrl) {
          document.getElementById("avatarDisplay").innerHTML = "<img src='" + data.avatarUrl + "' />";
        }
      });
    });

    function saveAvatar() {
      const url = document.getElementById("avatarUrl").value.trim();
      const user = auth.currentUser;
      if (!user || !url) return;
      db.collection("users").doc(user.uid).update({ avatarUrl: url }).then(() => {
        document.getElementById("avatarDisplay").innerHTML = "<img src='" + url + "' />";
        alert("저장 완료!");
      });
    }
  </script>
</body>
</html>
